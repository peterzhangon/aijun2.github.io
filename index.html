<!DOCTYPE html>

<html>
<link href='https://fonts.googleapis.com/css?family=Lato:300,900' rel='stylesheet' type='text/css'>
<link rel="stylesheet" type="text/css" href="css/basic.css" />

<!-- import d3.v4 -->
<script src="https://d3js.org/d3.v4.js"></script>

  <head>
    <title>A whole picture on Covid-19 Cases and Deaths in USA</title>
  </head>
  <body>

  <!-- page 0: home page overview -->
  <!-- ************************** -->
  <section class="" id="section_home_page">
    <button type="button", id="home_home_button" >Home</button>
    <button type="button", id="home_pre_button" >Previous</button>
    <button type="button" onclick="update_home_next()">Next</button>
    <H1>Home page: Overview of Covid-19 status in USA</H1>
  </section>

  <!-- page 1: multiple lines -->
  <!-- ************************** -->
  <section class="" id="section_mul_lines">
    <button type="button" onclick="init_pages()">Home</button>
    <button type="button" onclick="update_mul_lines_pre()">Previous</button>
    <button type="button" onclick="update_mul_lines_next()">Next</button>

    <H1>Page-1: Covid-19 Trends</H1>
    <pre id="message-container"></pre>

    <!-- Create a div where the graph will take place -->
    <div id="tooltip_lines_left"></div>
    <div id="mul_line_left"></div>

    <script>
      function get_d_val(isCases, d) {
        if(isCases)
        {
          return d.cases;
        }
        else
        {
          return d.deaths;
        }
      }
      function mul_lines_func (isCases) {

        // TODO, tooltip not work yet
        if (isCases) {
            pos_tooltip = "#tooltip_lines_left";
            div_pos = "mul_line_left";
            char_title = "Chart-1: Trends in cases";
        } else {
            pos_tooltip = "#tooltip_lines_left";
            div_pos = "mul_line_left"; /// We just append
            char_title = "Chart-2: Trends in deaths";
        }

        // set the dimensions and margins of the graph
        var margin = {top: 10, right: 30, bottom: 30, left: 60},
          width = 860 - margin.left - margin.right,
          height = 300 - margin.top - margin.bottom;

        // append the svg object to the body of the page
        var svg = d3.select("#" + div_pos)
          .append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
              .attr("transform",
                    "translate(" + margin.left + "," + margin.top + ")");

        svg.append("text")
          .attr("class", "h2")
          .attr("x", width/2)
          .style("font-size", "20px")
          .style("text-decoration", "underline")
          .attr("y", 0 - (-20))
          .attr("text-anchor", "middle")
          .text(char_title);

        // Read the data
        d3.csv("data/us-states-trend.csv", function(data) {

          var parseTime = d3.timeParse("%Y/%m/%d");

          data.forEach(function(d) {
              d.date = parseTime(d.date);
            });

          // group the data: I want to draw one line per group
          var sumstat = d3.nest() // nest function allows to group the calculation per level of a factor
            .key(function(d) { return d.state;})
            .entries(data);

          // Add X axis --> it is a date format
          var x = d3.scaleLinear()
            .domain(d3.extent(data, function(d) { return d.date; }))
            .range([ 0, width ]);

          svg.append("g")
            .attr("transform", "translate(0," + height + ")")
            .call(d3.axisBottom(x).tickFormat(d3.timeFormat("%Y-%m")))

          // Add Y axis
          var y = d3.scaleLinear()
            .domain([0, d3.max(data, function(d) {return +get_d_val(isCases, d);})])
            .range([ height, 0 ]);

          svg.append("g")
            .call(d3.axisLeft(y));

          // color palette
          var res = sumstat.map(function(d){ return d.key }) // list of group names

          var color = d3.scaleOrdinal()
            .domain(res)
            .range(["#1b70fc", "#faff16", "#d50527", "#158940", "#f898fd", "#24c9d7", "#cb9b64", "#866888",
            "#22e67a", "#e509ae", "#9dabfa", "#437e8a", "#b21bff", "#ff7b91", "#94aa05", "#ac5906", "#82a68d", "#fe6616",
            "#7a7352", "#f9bc0f", "#b65d66", "#07a2e6", "#c091ae", "#8a91a7", "#88fc07", "#ea42fe", "#9e8010", "#10b437",
            "#c281fe", "#f92b75", "#07c99d", "#a946aa", "#bfd544", "#16977e", "#ff6ac8", "#a88178", "#5776a9", "#678007",
            "#fa9316", "#85c070", "#6aa2a9", "#989e5d", "#fe9169", "#cd714a", "#6ed014", "#c5639c", "#c23271", "#698ffc",
            "#678275", "#c5a121", "#a978ba", "#ee534e", "#d24506", "#59c3fa", "#ca7b0a", "#6f7385", "#9a634a", "#48aa6f",
            "#ad9ad0", "#d7908c", "#6a8a53", "#8c46fc", "#8f5ab8", "#fd1105", "#7ea7cf", "#d77cd1", "#a9804b", "#0688b4",
            "#6a9f3e", "#ee8fba", "#a67389", "#9e8cfe", "#bd443c", "#6d63ff", "#d110d5", "#798cc3", "#df5f83", "#b1b853",
            "#bb59d8", "#1d960c", "#867ba8", "#18acc9", "#25b3a7", "#f3db1d", "#938c6d", "#936a24", "#a964fb", "#92e460",
            "#a05787", "#9c87a0", "#20c773", "#8b696d", "#78762d", "#e154c6", "#40835f", "#d73656", "#1afd5c", "#c4f546",
            "#3d88d8", "#bd3896", "#1397a3", "#f940a5", "#66aeff", "#d097e7", "#fe6ef9", "#d86507", "#8b900a", "#d47270",
            "#e8ac48", "#cf7c97", "#cebb11", "#718a90", "#e78139", "#ff7463", "#bea1fd"])

          // Draw the line
          svg.selectAll(".line")
            .data(sumstat)
            .enter()
            .append("path")
            .attr("fill", "none")
            .attr("stroke", function(d){return color(d.values[0].state) })
            .attr("stroke-width", 1.5)
            .attr("d", function(d){
              return d3.line()
                .x(function(d) { return x(d.date); })
                .y(function(d) {return y(+get_d_val(isCases, d));})
                (d.values)
            })
            .on("mouseover", function(d,i) { // TODO, tooltip not work yet
              d3.select(pos_tooltip).style("opacity", 1)
                .style("left",(d3.event.pageX)+"px")
                .style("top",(d3.event.pageY)+"px")
                .html("Item #: "+i+", state: " + d.state + ", cases: " + d.cases + ", deaths: " + d.deaths);
            })
            .on("mouseout", function() {
               d3.select(pos_tooltip).style("opacity", 0)
             })
          })
      }
      mul_lines_func(true)
      mul_lines_func(false)

      </script>
    </section>



    <!-- page 2: multiple bars -->
    <!-- ************************** -->
    <section class="" id="section_mul_bars">
      <button type="button" onclick="init_pages()">Home</button>
      <button type="button" onclick="update_mul_bars_pre()">Previous</button>
      <button type="button" onclick="update_mul_bars_next()">Next</button>

      <H1>Page-2: Cases comparison between states</H1>
      <pre id="message-container"></pre>

      <!-- Create a div where the graph will take place -->
      <div id="tooltip_bar_left"></div>
      <div id="mul_bars_left"></div>
      <div id="tooltip_bar_right"></div>
      <div id="mul_bars_right"></div>

      <script>

        function get_d_val(isCases, d) {
          if(isCases)
          {
            return d.cases;
            }
            else
            {
              return d.deaths;
            }
          }
        function bars_func (isCases) {
          //var pos = "";
          //var pos_tooltip = "";
          if(isCases)
          {
            pos_tooltip = "#tooltip_bar_left";
            pos = "#mul_bars_left";
            char_title = "Chart-1: Comparasion in cases";
          }
          else
          {
            pos_tooltip = "#tooltip_bar_left";
            pos = "#mul_bars_left";
            char_title = "Chart-2: Comparasion in deaths";
          }

          // set the dimensions and margins of the graph
          var margin = {top: 30, right: 30, bottom: 70, left: 60},
              width = 1260 - margin.left - margin.right,
              height = 300 - margin.top - margin.bottom;

          // append the svg object to the body of the page
          var svg = d3.select(pos)
            .append("svg")
              .attr("width", width + margin.left + margin.right)
              .attr("height", height + margin.top + margin.bottom)
            .append("g")
              .attr("transform",
                    "translate(" + margin.left + "," + margin.top + ")");

          svg.append("text")
            .attr("class", "h2")
            .attr("x", width/2)
            .style("font-size", "20px")
            .style("text-decoration", "underline")
            .attr("y", 0 - (-20))
            .attr("text-anchor", "middle")
            .text(char_title);

          // Parse the Data
          d3.csv("data/us-states-bar-map.csv", function(data) {
            // sort data
            data.sort(function(b, a) {
              return get_d_val(isCases, a) - get_d_val(isCases, b);
            });

          // color palette
          var res = data.map(function(d){ return d.state }) // list of group names

          var color = d3.scaleOrdinal()
            .domain(res)
            .range(["#1b70fc", "#faff16", "#d50527", "#158940", "#f898fd", "#24c9d7", "#cb9b64", "#866888",
            "#22e67a", "#e509ae", "#9dabfa", "#437e8a", "#b21bff", "#ff7b91", "#94aa05", "#ac5906", "#82a68d", "#fe6616",
            "#7a7352", "#f9bc0f", "#b65d66", "#07a2e6", "#c091ae", "#8a91a7", "#88fc07", "#ea42fe", "#9e8010", "#10b437",
            "#c281fe", "#f92b75", "#07c99d", "#a946aa", "#bfd544", "#16977e", "#ff6ac8", "#a88178", "#5776a9", "#678007",
              "#fa9316", "#85c070", "#6aa2a9", "#989e5d", "#fe9169", "#cd714a", "#6ed014", "#c5639c", "#c23271", "#698ffc",
              "#678275", "#c5a121", "#a978ba", "#ee534e", "#d24506", "#59c3fa", "#ca7b0a", "#6f7385", "#9a634a", "#48aa6f",
              "#ad9ad0", "#d7908c", "#6a8a53", "#8c46fc", "#8f5ab8", "#fd1105", "#7ea7cf", "#d77cd1", "#a9804b", "#0688b4",
              "#6a9f3e", "#ee8fba", "#a67389", "#9e8cfe", "#bd443c", "#6d63ff", "#d110d5", "#798cc3", "#df5f83", "#b1b853",
              "#bb59d8", "#1d960c", "#867ba8", "#18acc9", "#25b3a7", "#f3db1d", "#938c6d", "#936a24", "#a964fb", "#92e460",
              "#a05787", "#9c87a0", "#20c773", "#8b696d", "#78762d", "#e154c6", "#40835f", "#d73656", "#1afd5c", "#c4f546",
              "#3d88d8", "#bd3896", "#1397a3", "#f940a5", "#66aeff", "#d097e7", "#fe6ef9", "#d86507", "#8b900a", "#d47270",
              "#e8ac48", "#cf7c97", "#cebb11", "#718a90", "#e78139", "#ff7463", "#bea1fd"])

          // X axis
          var x = d3.scaleBand()
            .range([ 0, width ])
            .domain(data.map(function(d) { return d.state; }))
            .padding(0.2);
          svg.append("g")
            .attr("transform", "translate(0," + height + ")")
            .call(d3.axisBottom(x))
            .selectAll("text")
              .attr("transform", "translate(-10,0)rotate(-45)")
              .style("text-anchor", "end");

          // Add Y axis
          var y = d3.scaleLinear()
            .domain([0, d3.max(data, function(d) {return +get_d_val(isCases, d);})])
            .range([ height, 0]);
          svg.append("g")
            .call(d3.axisLeft(y));

          var tooltip = d3.select("body").append("div")
              .attr("class", "tooltip")
              .style("opacity", 0);

          // Bars
          svg.selectAll("mybar")
            .data(data)
            .enter()
            .append("rect")
              .attr("x", d=> x(d.state))
              .attr("y", d=> y(get_d_val(isCases, d)))
              .attr("width", x.bandwidth())
              .attr("height", d=> height - y(get_d_val(isCases, d)))
              .attr("fill", function(d){ return color(d.state) })
              .on("mouseover", function(d) {
                  tooltip.transition()
                      .duration(200)
                      .style("opacity", .9);
                  if (isCases) {
                    tooltip.html("<h4>" + d.state + "</h4><table>"
                        + "<tr><td>cases<td>" + d.cases + "</tr></td>"
                        + "<tr><td>cass_percent<td>" + d.cases_percent + "</tr></td>")
                        .style("left", (d3.event.pageX + 5) + "px")
                        .style("top", (d3.event.pageY - 28) + "px");
                  }
                  else {
                    tooltip.html("<h4>" + d.state + "</h4><table>"
                        + "<tr><td>deaths<td>" + d.deaths + "</tr></td>"
                        + "<tr><td>deaths_percent<td>" + d.deaths_percent + "</tr></td>")
                        .style("left", (d3.event.pageX + 5) + "px")
                        .style("top", (d3.event.pageY - 28) + "px");
                  }
              })
              .on("mouseout", function(d) {
                  tooltip.transition()
                      .duration(500)
                      .style("opacity", 0);
              });

          })
      }

      bars_func(true);
      bars_func(false);
      </script>
   </section>


   <!-- page 3: a map -->
   <!-- ************************** -->
   <section class="" id="section_mul_maps">
     <button type="button" onclick="init_pages()">Home</button>
     <button type="button" onclick="update_mul_map_pre()">Previous</button>
     <button type="button" onclick="update_mul_map_next()">Next</button>

      <H1>Page-4: Choropleth Map with Tooltips</H1>
      <pre id="message-container"></pre>

      <!-- Create a div where the graph will take place -->
      <div id="tooltip_map_left"></div>
      <div id="mul_map_left"></div>
      <div id="tooltip"></div>
      <div id="legend"></div>

      <script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>

      <script>
       tmp_color = {
         0: "#1b70fc",
         1: "#faff16",
         2: "#d50527",
         3: "#158940",
         4: "#f898fd",
         5: "#24c9d7",
         6: "#cb9b64",
         7: "#866888",
         8: "#22e67a",
         9: "#e509ae",
         10: "#9dabfa",
         11: "#437e8a",
         12: "#b21bff",
         13: "#ff7b91",
         14: "#94aa05",
         15: "#ac5906",
         16: "#82a68d",
         17: "#fe6616",
         18: "#7a7352",
         19: "#f9bc0f",
         20: "#b65d66",
         21: "#07a2e6",
         22: "#c091ae",
         23: "#8a91a7",
         24: "#88fc07",
         25: "#ea42fe",
         26: "#9e8010",
         27: "#10b437",
         28: "#c281fe",
         29: "#f92b75",
         30: "#07c99d",
         31: "#a946aa",
         32: "#bfd544",
         33: "#16977e",
         34: "#ff6ac8",
         35: "#a88178",
         36: "#5776a9",
         37: "#678007",
         38: "#fa9316",
         39: "#85c070",
         40: "#6aa2a9",
         41: "#989e5d",
         42: "#fe9169",
         43: "#cd714a",
         44: "#6ed014",
         45: "#c5639c",
         46: "#c23271",
         47: "#698ffc",
         48: "#678275",
         49: "#c5a121",
         50: "#a978ba",
         51: "#ee534e",
         52: "#d24506",
         53: "#59c3fa",
         54: "#ca7b0a",
         55: "#6f7385"
         };

       function map_func (isCases) {
         if(isCases)
         {
           pos_tooltip = "#tooltip_map_left";
           pos = "#mul_map_left";
         }
         else
         {
           pos_tooltip = "#tooltip_map_left";
           pos = "#mul_map_left";
         }

           // https://bl.ocks.org/wboykinm/dbbe50d1023f90d4e241712395c27fb3
           var margin = {top: 40, right: 40, bottom: 40, left: 40},
               width = 850,// - margin.left - margin.right,
               height = 450;// - margin.top - margin.bottom;

               var lowColor = '#f9f9f9'
               var highColor = '#bc2a66'

               // D3 Projection
               var projection = d3.geoAlbersUsa()
                 .translate([width / 2, height / 2])  // translate to center of screen
                 .scale([1000]);                      // scale things down so see entire US

               // Define path generator
               var path = d3.geoPath()     // path generator that will convert GeoJSON to SVG paths
                 .projection(projection);    // tell path generator to use albersUsa projection

               // Create SVG element and append map to the SVG
               var svg = d3.select(pos)
                   .append("svg")
                   .attr("width", width + margin.left + margin.right)
                   .attr("height", height + margin.top + margin.bottom);

               var tooltip = d3.select("body").append("div")
                   .attr("class", "tooltip")
                   .style("opacity", 0);

               // Load in my states data!
               d3.csv("data/us-states-bar-map.csv", function(data) {
                 var dataArray = [];
                    for (var i = 0; i < data.length; i++) {
                    if(isCases) {
                       data[i].value = data[i].cases;
                    } else {

                      data[i].value = data[i].deaths;
                    }
                    dataArray.push(parseFloat(data[i].value))
                    }
                    var minVal = d3.min(dataArray)
                    var maxVal = d3.max(dataArray)
                    var ramp = d3.scaleLinear().domain([minVal, maxVal]).range([lowColor, highColor])

                 // Load my data and merge with states data
                 d3.json("data/us-states.json", function(json) {

                 // Loop through each state data value in the .csv file
                 for (var i = 0; i < data.length; i++) {

                   // Find the corresponding state inside the GeoJSON
                   for (var j = 0; j < json.features.length; j++) {
                       var jsonState = json.features[j].properties.name;
                       var d = data[i]
                       if ( d.state == jsonState) {
                           // Copy the data value into the JSON
                           json.features[j].properties.value = d.value;
                           if (isCases) {
                             json.features[j].properties.color = d.color;
                             json.features[j].properties.cases = d.cases;
                             json.features[j].properties.cases_percent = d.cases_percent;
                           }
                           else {
                             json.features[j].properties.color = d.color;
                             json.features[j].properties.deaths = d.deaths;
                             json.features[j].properties.deaths_percent = d.deaths_percent;
                           }

                           // Stop looking through the JSON
                           break;
                       }
                   }
               }

               // Bind the data to the SVG and create one path per GeoJSON feature
               svg.selectAll("path")
                   .data(json.features)
                   .enter()
                   .append("path")
                   .attr("d", path)
                   .style("stroke", "#fff")
                   .style("stroke-width", "1")
                   .style("fill", function(d) {return ramp(d.properties.value)})
                   .on("mouseover", function(d) {
                       tooltip.transition()
                           .duration(200)
                           .style("opacity", .9);
                       if (isCases) {
                         tooltip.html("<h4>" + d.properties.name + "</h4><table>"
                             + "<tr><td>cases<td>" + d.properties.cases + "</tr></td>"
                             + "<tr><td>cass_percent<td>" + d.properties.cases_percent + "</tr></td>")
                             .style("left", (d3.event.pageX + 5) + "px")
                             .style("top", (d3.event.pageY - 28) + "px");
                       }
                       else {
                         tooltip.html("<h4>" + d.properties.name + "</h4><table>"
                             + "<tr><td>deaths<td>" + d.properties.deaths + "</tr></td>"
                             + "<tr><td>deaths_percent<td>" + d.properties.deaths_percent + "</tr></td>")
                             .style("left", (d3.event.pageX + 5) + "px")
                             .style("top", (d3.event.pageY - 28) + "px");
                       }

                   })
                   .on("mouseout", function(d) {
                       tooltip.transition()
                           .duration(500)
                           .style("opacity", 0);
                   });
                   if(isCases)
                   {
                     char_title = "Chart-1: Compare based on cases";
                   }
                   else
                   {
                     char_title = "Chart-2: Compare based on deaths";
                   }
                   svg.append("text")
                     .attr("class", "h2")
                     .attr("x", width/2)
                     .style("font-size", "20px")
                     .style("text-decoration", "underline")
                     .attr("y", 0 - (-20))
                     .attr("text-anchor", "middle")
                     .text(char_title);
                  console.log(char_title)

                   // add a legend
                     var w = 140, h = 300;

                     var key = d3.select("path")
                         .append("svg")
                           .attr("width", w)
                           .attr("height", h)
                           .attr("class", "legend");

                       var legend = key.append("defs")
                           .append("svg:linearGradient")
                           .attr("id", "gradient")
                           .attr("x1", "100%")
                           .attr("y1", "0%")
                           .attr("x2", "100%")
                           .attr("y2", "100%")
                           .attr("spreadMethod", "pad");

                       legend.append("stop")
                           .attr("offset", "0%")
                           .attr("stop-color", highColor)
                           .attr("stop-opacity", 1);

                     legend.append("stop")
                           .attr("offset", "100%")
                           .attr("stop-color", lowColor)
                           .attr("stop-opacity", 1);

                       key.append("rect")
                           .attr("width", w - 100)
                           .attr("height", h)
                           .style("fill", "url(#gradient)")
                           .attr("transform", "translate(0,10)");

                       var y = d3.scaleLinear()
                           .range([h, 0])
                           .domain([minVal, maxVal]);

                       var yAxis = d3.axisRight(y);

                       key.append("g")
                           .attr("class", "y axis")
                           .attr("transform", "translate(41,10)")
                           .call(yAxis)
               });
           });
       }

       map_func (true);
       map_func (false);
       </script>
    </section>


    <!-- page 4: the last page -->
    <!-- ************************** -->
    <section class="" id="section_last_page">
      <button type="button" onclick="init_pages()">Home</button>
      <button type="button" onclick="update_last_page_pre()">Previous</button>
      <button type="button", id="last_next_button">Next</button>
      <H1>The last page</H1>
    </section>

    <script>
      function init_pages() {
        console.log("init pages.");
        document.getElementById("section_home_page").style.display = 'block'; // current
        document.getElementById("section_mul_lines").style.display = 'none';
        document.getElementById("section_mul_bars").style.display = 'none';
        document.getElementById("section_mul_maps").style.display = 'none';
        document.getElementById("section_last_page").style.display = 'none';
        // Disable buttons
        document.getElementById("home_home_button").disabled = true;
        document.getElementById("home_pre_button").disabled = true;
        document.getElementById("last_next_button").disabled = true;
      }
      init_pages();

      // Home page
      function update_home_next() {
        console.log("page: Home - > line.");
        document.getElementById("section_home_page").style.display = 'none'; // current
        document.getElementById("section_mul_lines").style.display = 'block';
        document.getElementById("section_mul_bars").style.display = 'none';
        document.getElementById("section_mul_maps").style.display = 'none';
        document.getElementById("section_last_page").style.display = 'none';
      }

      // Page 1: multiple lines
      function update_mul_lines_pre() {
        console.log("page: Line - > Home.");
        document.getElementById("section_home_page").style.display = 'block';
        document.getElementById("section_mul_lines").style.display = 'none';// current
        document.getElementById("section_mul_bars").style.display = 'none';
        document.getElementById("section_mul_maps").style.display = 'none';
        document.getElementById("section_last_page").style.display = 'none';
      }
      function update_mul_lines_next() {
        console.log("page: Line - > bar.");
        document.getElementById("section_home_page").style.display = 'none';
        document.getElementById("section_mul_lines").style.display = 'none';// current
        document.getElementById("section_mul_bars").style.display = 'block';
        document.getElementById("section_mul_maps").style.display = 'none';
        document.getElementById("section_last_page").style.display = 'none';
      }

      // Page 2 : multiple bars
      function update_mul_bars_pre() {
        console.log("page: bar - > line.");
        document.getElementById("section_home_page").style.display = 'none';
        document.getElementById("section_mul_lines").style.display = 'block';
        document.getElementById("section_mul_bars").style.display = 'none';// current
        document.getElementById("section_mul_maps").style.display = 'none';
        document.getElementById("section_last_page").style.display = 'none';
      }
      function update_mul_bars_next() {
        console.log("page: bar - > map.");
        document.getElementById("section_home_page").style.display = 'none';
        document.getElementById("section_mul_lines").style.display = 'none';
        document.getElementById("section_mul_bars").style.display = 'none';// current
        document.getElementById("section_mul_maps").style.display = 'block';
        document.getElementById("section_last_page").style.display = 'none';
      }

      // Page 3 : map
      function update_mul_map_pre() {
        console.log("page: map - > bar.");
        document.getElementById("section_home_page").style.display = 'none';
        document.getElementById("section_mul_lines").style.display = 'none';
        document.getElementById("section_mul_bars").style.display = 'block';
        document.getElementById("section_mul_maps").style.display = 'none';// current
        document.getElementById("section_last_page").style.display = 'none';
      }
      function update_mul_map_next() {
        console.log("page: map - > end.");
        document.getElementById("section_home_page").style.display = 'none';
        document.getElementById("section_mul_lines").style.display = 'none';
        document.getElementById("section_mul_bars").style.display = 'none';
        document.getElementById("section_mul_maps").style.display = 'none'; // current
        document.getElementById("section_last_page").style.display = 'block';
      }

      // Page 4 : last page
      function update_last_page_pre() {
        console.log("page: map - > last page.");
        document.getElementById("section_home_page").style.display = 'none';
        document.getElementById("section_mul_lines").style.display = 'none';
        document.getElementById("section_mul_bars").style.display = 'none';
        document.getElementById("section_mul_maps").style.display = 'block';
        document.getElementById("section_last_page").style.display = 'none';// current
      }
    </script>
  </body>
</html>
